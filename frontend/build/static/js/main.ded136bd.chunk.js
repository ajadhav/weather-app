(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{23:function(e){e.exports=JSON.parse('{"cities":[{"id":5128581,"name":"New York","state":"NY","country":"US","coord":{"lon":-74.005966,"lat":40.714272}},{"id":4560349,"name":"Philadelphia","state":"PA","country":"US","coord":{"lon":-75.163788,"lat":39.952339}},{"id":4990729,"name":"Detroit","state":"MI","country":"US","coord":{"lon":-83.045753,"lat":42.331429}},{"id":4887398,"name":"Chicago","state":"IL","country":"US","coord":{"lon":-87.650047,"lat":41.850029}},{"id":5368361,"name":"Los Angeles","state":"CA","country":"US","coord":{"lon":-118.243683,"lat":34.052231}},{"id":5809844,"name":"Seattle","state":"WA","country":"US","coord":{"lon":-122.332069,"lat":47.606209}}]}')},48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),c=n(22),s=n.n(c),l=n(7),i=n.n(l),o=n(9),d=n.n(o),u=n(12),j=n(6),m=n(1),b="[Weather] LOAD_WEATHER",p="[Weather] LOAD_WEATHER_SUCCESS",h="[Weather] LOAD_WEATHER_ERROR",x="[Weather] SET_UNITS",f="[Weather] SET_LOCATION",O=function(e,t){switch(t.type){case b:return Object(m.a)(Object(m.a)({},e),{},{loading:!0,error:!1});case p:return Object(m.a)(Object(m.a)({},e),{},{loading:!1,error:!1,weatherData:t.payload});case h:return Object(m.a)(Object(m.a)({},e),{},{loading:!1,error:!0});case"[Weather] RESET":return Object(m.a)(Object(m.a)({},e),{},{weatherData:{weatherData:{lat:null,lon:null,name:"",timezone:"",timezone_offset:null,current:null,hourly:[],daily:[]},loading:!1,error:!1,units:"imperial",selectedCity:"",selectedLat:null,selectedLon:null},loading:!1,error:!1});case x:return Object(m.a)(Object(m.a)({},e),{},{units:t.payload});case f:return Object(m.a)(Object(m.a)({},e),{},{selectedCity:t.payload.name,selectedLat:t.payload.lat,selectedLon:t.payload.lon});default:throw new Error}},v=n(0),g=Object(a.createContext)(),y=function(e){var t=e.children,n=Object(a.useReducer)(O,{weatherData:{lat:null,lon:null,name:"",timezone:"",timezone_offset:null,current:null,hourly:[],daily:[]},loading:!1,error:!1,units:"imperial",selectedCity:"",selectedLat:null,selectedLon:null}),r=Object(j.a)(n,2),c={state:r[0],dispatch:r[1]};return Object(v.jsx)(g.Provider,{value:c,children:t})},w=function(){var e=Object(a.useContext)(g);if(void 0===e)throw new Error("useWeather must be used within a WeatherProvider");return e};function N(e,t,n){return C.apply(this,arguments)}function C(){return(C=Object(u.a)(d.a.mark((function e(t,n,a){var r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n({type:b}),e.prev=1,console.log(t),e.next=5,i.a.get("/api/weather",{params:t},a);case 5:r=e.sent,(c=r.data).current.name=t.name,c.current.sunset=new Date(1e3*c.current.sunset).toLocaleTimeString([],{timeStyle:"short"}),c.current.sunrise=new Date(1e3*c.current.sunrise).toLocaleTimeString([],{timeStyle:"short"}),n({type:p,payload:c}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),console.error(e.t0),i.a.isCancel(e.t0)||n({type:h});case 17:case"end":return e.stop()}}),e,null,[[1,13]])})))).apply(this,arguments)}var k,_=function(e){var t=w().dispatch,n=e.cityList.map((function(e){return Object(v.jsx)("button",{onClick:function(){return function(e){var n={name:e.name,lat:e.lat,lon:e.lon};t({type:f,payload:n}),N(n,t,null)}(e)},className:"btn btn-light my-1 mx-1",children:e.name},e.id)}));return Object(v.jsx)("div",{className:"my-3 d-flex flex-wrap justify-content-center align-items-stretch align-self-stretch",children:n})},S=function(){var e=w().state,t=e.weatherData,n=e.error;return Object(v.jsx)(v.Fragment,{children:n&&Object(v.jsx)("div",{className:"alert alert-danger",children:t.name?"We do not have information for ".concat(t.name,", please enter another city"):"Something went wrong...please enter another city"})})},D=n(3),T=function(){return Object(v.jsxs)("div",{className:"card-header row placeholder-glow d-flex justify-content-between g-0 p-4",children:[Object(v.jsx)("h4",{className:"card-title flex-grow-1  col-4",children:Object(v.jsx)("span",{className:"placeholder col-6"})}),Object(v.jsx)("h6",{className:"col-4",children:Object(v.jsx)("span",{className:"placeholder col-12"})})]})},A=function(){return Object(v.jsx)("div",{className:"col-4",children:Object(D.a)(Array(2).keys()).map((function(e){return Object(v.jsxs)("div",{children:[Object(v.jsx)("i",{className:"placeholder col-1"}),Object(v.jsx)("span",{className:"placeholder col-9"})]},e)}))})},I=function(){return Object(v.jsxs)("div",{className:"card-body row placeholder-glow g-0 p-4",children:[Object(v.jsxs)("div",{className:"text-center",children:[Object(v.jsx)("h6",{className:"display-4 font-weight-bold",children:Object(v.jsx)("span",{className:"placeholder col-6"})}),Object(v.jsx)("p",{className:"small px-5",children:Object(v.jsx)("span",{className:"placeholder col-6"})})]}),Object(v.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(v.jsx)(A,{}),Object(v.jsx)("div",{className:"display-4 col-4",children:Object(v.jsx)("span",{className:"placeholder col-12"})})]}),Object(v.jsx)(E,{})]})},L=function(){return Object(v.jsx)("div",{className:"df__item flex-column text-center",children:Object(v.jsx)("h1",{children:Object(v.jsx)("span",{className:"placeholder col-12 placeholder-lg"})})})},E=function(){return Object(v.jsx)("div",{className:"d-flex justify-content-space-evenly align-items-center",children:Object(D.a)(Array(7).keys()).map((function(e,t){return Object(v.jsx)(L,{forecast:e},t)}))})},F=function(){return Object(v.jsxs)("div",{className:"card","aria-hidden":"true",children:[Object(v.jsx)(T,{}),Object(v.jsx)(I,{})]})},W=function(e){var t=e.name,n=e.dateTime,a=new Date(1e3*n);return Object(v.jsx)("div",{className:"card-header row g-0 p-4",children:Object(v.jsxs)("div",{className:"hstack gap-3",children:[Object(v.jsx)("div",{className:"h3 card-title pe-5",children:t}),Object(v.jsx)("div",{className:"vr"}),Object(v.jsxs)("div",{className:"vstack px-5",children:[Object(v.jsx)("div",{className:"h6 text-muted small",children:a.toLocaleDateString()}),Object(v.jsxs)("div",{className:"h6 text-muted small",children:[" ",a.toLocaleTimeString()]})]})]})})},R=function(e){var t=e.value,n=e.icon;return Object(v.jsxs)("div",{children:[Object(v.jsx)("i",{className:n}),Object(v.jsx)("span",{children:t})]})},U=function(e){var t=e.current,n={sunrise:"bi bi-sunrise fa-solid fa-fw",sunset:"bi bi-sunset fa-solid fa-fw",humidity:"fas fa-tint fa-fw",wind_speed:"fas fa-wind fa-fw"},a=Object.keys(n);return Object(v.jsx)("div",{className:"flex-grow-1",children:a.map((function(e,a){return Object(v.jsx)(R,{value:t&&t[e],icon:n[e]},a)}))})},q=(n(48),function(e){var t=e.hour,n=new Intl.DateTimeFormat("en-US",{hour:"numeric",hour12:!0}).format(new Date(1e3*(null===t||void 0===t?void 0:t.dt))).replace(/\s+/g,""),a=null===t||void 0===t?void 0:t.weather[0].icon,r=null===t||void 0===t?void 0:t.weather[0].description,c=null===t||void 0===t?void 0:t.temp;return Object(v.jsxs)("div",{className:"d-flex flex-column hf__item justify-content-evenly small",children:[Object(v.jsx)("p",{className:"mb-0",children:n}),Object(v.jsx)("div",{children:Object(v.jsx)("img",{className:"img-fluid",src:"".concat("","/assets/icons/").concat(a,".png"),alt:r})}),Object(v.jsx)("p",{children:c})]})}),P=function(e){var t=e.hourly;return Object(v.jsx)("div",{className:"d-flex  hf__items text-center",children:t&&t.map((function(e,t){return Object(v.jsx)(q,{hour:e},t)}))})},z=n(11);z.a.register.apply(z.a,Object(D.a)(z.b));var B=function(e){var t=e.hourlyData,n=null===t||void 0===t?void 0:t.map((function(e){return e.temp})),r=null===t||void 0===t?void 0:t.map((function(e){return e.rain&&e.rain["1h"]})),c=Object(a.useRef)(null);return Object(a.useEffect)((function(){return function(){var e={type:"line",data:{datasets:[{type:"line",label:"temp",data:n,yAxisID:"TempAxis",fill:!1,borderColor:"rgb(0,158,115)",tension:.4},{type:"bar",label:"rain",data:r,yAxisID:"RainAxis",backgroundColor:"rgba(39,76,245,0.3)"}],labels:null===t||void 0===t?void 0:t.map((function(e){return new Intl.DateTimeFormat("en-US",{hour:"numeric",hour12:!0}).format(new Date(1e3*(null===e||void 0===e?void 0:e.dt))).replace(/\s+/g,"")}))},options:{responsive:!0,scales:{TempAxis:{id:"TempAxis",type:"linear",position:"left",grid:{display:!0,drawBorder:!1,drawOnChartArea:!1},title:{text:"\xb0"}},RainAxis:{id:"RainAxis",position:"right",grid:{display:!1,drawBorder:!1,drawOnChartArea:!1},ticks:{display:!1,min:0}}},plugins:{tooltip:{callbacks:{label:function(e){var t=e.dataset.label||"";return 1===e.datasetIndex&&null!==e.parsed.y?t+=" "+e.parsed.y+" mm":0===e.datasetIndex&&null!==e.parsed.y&&(t+=" "+e.parsed.y+"\xb0"),t}}}}}},a=c.current.getContext("2d");"undefined"!==typeof k&&k.destroy(),k=new z.a(a,e)}(),function(){return k.destroy()}}),[c,t]),Object(v.jsx)("div",{children:Object(v.jsx)("canvas",{ref:c})})},H=function(e){var t,n,a=e.current,r=e.hourly,c=null===a||void 0===a?void 0:a.temp,s=null===a||void 0===a?void 0:a.feels_like,l=null===a||void 0===a||null===(t=a.weather[0])||void 0===t?void 0:t.description,i=null===a||void 0===a||null===(n=a.weather[0])||void 0===n?void 0:n.icon;return Object(v.jsxs)("div",{className:"card-body row g-0 p-4",children:[Object(v.jsxs)("div",{className:"text-center d-flex flex-column mb-4",children:[Object(v.jsx)("h4",{className:"display-4 font-weight-bold",children:c}),Object(v.jsxs)("span",{className:"small px-5",children:[" Feels like: ",s]}),Object(v.jsx)("span",{className:"small px-5",children:l})]}),Object(v.jsxs)("div",{className:"d-flex align-items-center pb-3",children:[Object(v.jsx)(U,{current:a}),Object(v.jsx)("div",{children:Object(v.jsx)("img",{src:"".concat("","/assets/icons/").concat(i,".png"),alt:l})})]}),Object(v.jsx)(B,{hourlyData:null===r||void 0===r?void 0:r.slice(0,8)}),Object(v.jsx)(P,{hourly:r})]})},J=function(e){var t=e.day,n=new Intl.DateTimeFormat("en-US",{weekday:"long"}).format(new Date(1e3*t.dt)),a={min:t.temp.min,max:t.temp.max},r=t.weather[0].icon,c=null===t||void 0===t?void 0:t.weather[0].description;return Object(v.jsxs)("div",{className:"d-flex align-items-center list-group-item border-0 mb-0",children:[Object(v.jsx)("p",{className:"flex-grow-1 small mb-0",children:n}),Object(v.jsx)("p",{className:"small mb-0",children:Object(v.jsx)("img",{className:"img-fluid w-50",src:"".concat("","/assets/icons/").concat(r,".png"),alt:c})}),Object(v.jsx)("p",{className:"small col-2 mb-0",children:a.max}),Object(v.jsx)("p",{className:"small col-2 text-muted mb-0",children:a.min})]})},K=function(e){var t=e.daily;return Object(v.jsx)("div",{className:"list-group collapse",id:"collapseContent1",children:t&&t.map((function(e,t){return Object(v.jsx)(J,{day:e},t)}))})},M=(n(49),function(e){var t=e.daily;return Object(v.jsxs)("div",{className:"card-footer row g-0 p-4",children:[Object(v.jsx)(K,{daily:t}),Object(v.jsxs)("a",{className:"btn btn-link link-info p-md-1 my-1","data-mdb-toggle":"collapse",href:"#collapseContent1",role:"button","aria-expanded":"false","aria-controls":"collapseContent1",children:[Object(v.jsx)("i",{className:"fas fa-chevron-down fa-lg"}),Object(v.jsx)("i",{className:"fas fa-chevron-up fa-lg"})]})]})}),Y=(n(50),function(){var e,t,n=w().state,a=n.weatherData,r=n.units,c=n.loading,s=n.error,l=function(e,t){if(e.current){var n,a,r,c,s,l={temp:"metric"===t?"\xb0C":"\xb0F",feels_like:"metric"===t?"\xb0C":"\xb0F",pressure:"hPa",humidity:"%",dew_point:"metric"===t?"\xb0C":"\xb0F",clouds:"%",visibility:"m",wind_speed:"metric"===t?" m/s":" mph",wind_gust:"metric"===t?" m/s":" mph",wind_deg:"\xb0",rain:"mm",snow:"mm"},i=function(e,t){return e&&("metric"===t?(n=e,5*(n-32)/9):e).toFixed();var n},o=function(e,t){return e&&("metric"===t?(n=e,.44704*n):e).toFixed();var n},d=Object(m.a)(Object(m.a)({},null===e||void 0===e?void 0:e.current),{},{temp:i(null===e||void 0===e||null===(n=e.current)||void 0===n?void 0:n.temp,t),feels_like:i(null===e||void 0===e||null===(a=e.current)||void 0===a?void 0:a.feels_like,t),dew_point:i(null===e||void 0===e||null===(r=e.current)||void 0===r?void 0:r.dew_point,t),wind_speed:o(null===e||void 0===e||null===(c=e.current)||void 0===c?void 0:c.wind_speed,t),wind_gust:o(null===e||void 0===e||null===(s=e.current)||void 0===s?void 0:s.wind_gust,t)});return Object(m.a)(Object(m.a)({},e),{},{current:Object.keys(d).reduce((function(e,t){return e[t]=t in l?d[t]+l[t]:d[t],e}),{}),daily:e.daily.map((function(e){return Object(m.a)(Object(m.a)({},e),{},{temp:Object.fromEntries(Object.entries(e.temp).map((function(e){var n=Object(j.a)(e,2),a=n[0],r=n[1];return[a,i(r,t)]})))})})),hourly:e.hourly.map((function(e){return Object(m.a)(Object(m.a)({},e),{},{temp:i(e.temp,t)})}))})}}(a,r);return Object(v.jsx)(v.Fragment,{children:c?Object(v.jsx)(F,{}):""===a.name||s?Object(v.jsx)("div",{}):Object(v.jsxs)("div",{className:"card",style:{borderRadius:"1.25rem"},children:[Object(v.jsx)(W,{name:null===l||void 0===l||null===(e=l.current)||void 0===e?void 0:e.name,dateTime:null===l||void 0===l||null===(t=l.current)||void 0===t?void 0:t.dt}),Object(v.jsx)(H,{current:null===l||void 0===l?void 0:l.current,hourly:null===l||void 0===l?void 0:l.hourly}),Object(v.jsx)(M,{daily:null===l||void 0===l?void 0:l.daily})]})})}),G=(n(51),function(e){e.handleImperial,e.handleMetric;var t=w().dispatch;return Object(v.jsxs)("div",{className:"my-3 d-flex flex-wrap justify-content-center align-items-stretch align-self-stretch",children:[Object(v.jsx)("button",{onClick:function(){return t({type:x,payload:"imperial"})},className:"btn btn-sm btn-light",children:"\xb0F"}),Object(v.jsx)("button",{onClick:function(){return t({type:x,payload:"metric"})},className:"btn btn-sm btn-dark",children:"\xb0C"})]})});n(52);function Q(e){e.changeLatLon;var t=Object(a.useState)({suggestionIdx:0,suggestions:[],query:""}),n=Object(j.a)(t,2),r=n[0],c=n[1],s=w().dispatch;Object(a.useEffect)((function(){var e=i.a.CancelToken.source(),t=e.cancel,n=e.token,a=setTimeout((function(){return l(r.query,n).then((function(e){c(Object(m.a)(Object(m.a)({},r),{},{suggestions:e}))}))}),500);return function(){return t("No longer latest query")||clearTimeout(a)}}),[r.query]);var l=function(){var e=Object(u.a)(d.a.mark((function e(t,n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={data:[]},!t){e.next=12;break}return e.prev=2,e.next=5,i.a.get("/api/suggestions?name=".concat(t),n);case 5:a=e.sent,e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),console.error(e.t0),i.a.isCancel(e.t0);case 12:return e.abrupt("return",a.data);case 13:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t,n){return e.apply(this,arguments)}}(),o=function(e){c({suggestionIdx:0,suggestions:[],query:""}),function(e){var t={name:e.name,lat:e.lat,lon:e.lon};s({type:f,payload:t}),N(t,s,null)}({name:e.currentTarget.dataset.city,lat:e.currentTarget.dataset.lat,lon:e.currentTarget.dataset.lon})},b=function(e){var t=e.onChange,n=e.onKeyDown,a=e.placeholder,r=e.query;return Object(v.jsx)("div",{className:"input-group mt-3 rounded",children:Object(v.jsx)("input",{autoFocus:!0,type:"search",value:r,autoComplete:"off",onChange:t,onKeyDown:n,id:"form1",className:"form-control",placeholder:a,"aria-label":"Search"})})},p=r.suggestions;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(b,{onChange:function(e){var t=e.currentTarget.value;c(Object(m.a)(Object(m.a)({},r),{},{query:t}))},onKeyDown:function(e){13===e.keyCode?(r.suggestions[r.suggestionIdx],c(Object(m.a)(Object(m.a)({},r),{},{query:"",suggestionIdx:0,suggestions:[]}))):38===e.keyCode&&0!==r.suggestionIdx?c(Object(m.a)(Object(m.a)({},r),{},{suggestionIdx:r.suggestionIdx-1})):40===e.keyCode&&r.suggestionIdx<r.suggestions.length-1&&c(Object(m.a)(Object(m.a)({},r),{},{suggestionIdx:r.suggestionIdx+1}))},placeholder:"City",query:r.query}),p&&Object(v.jsx)("ul",{className:"dropdown-menu scrollable-menu position-static rounded show",children:p.map((function(e,t){return Object(v.jsxs)("li",{className:"d-flex justify-content-between dropdown-item","data-city":e.name,"data-lat":e.coord.lat,"data-lon":e.coord.lon,onClick:o,children:[Object(v.jsxs)("span",{children:[e.name+", ",e.state&&e.state+", ",e.country+" ",Object(v.jsx)("img",{src:"https://openweathermap.org/images/flags/".concat(e.country.toLowerCase(),".png"),alt:""})]}),Object(v.jsx)("span",{className:"text-muted small",children:e.coord.lat.toFixed(3)+", "+e.coord.lon.toFixed(3)})]},t)}))})]})}var V=n(23),X=function(){var e=V.cities;return Object(v.jsx)("div",{className:"App",children:Object(v.jsx)(y,{children:Object(v.jsx)("div",{className:"container py-5 h-100",children:Object(v.jsx)("div",{className:"row d-flex justify-content-center align-items-center h-100",children:Object(v.jsxs)("div",{className:"position-relative col-md-8 col-lg-6 col-xl-4",children:[Object(v.jsx)("h1",{className:"text-center",children:"Weather App"}),Object(v.jsx)(Q,{}),Object(v.jsx)(G,{}),Object(v.jsx)(_,{cityList:e}),Object(v.jsx)(S,{}),Object(v.jsx)(Y,{})]})})})})})};s.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(X,{})}),document.getElementById("root"))}},[[53,1,2]]]);
//# sourceMappingURL=main.ded136bd.chunk.js.map