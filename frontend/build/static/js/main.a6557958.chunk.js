(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){"use strict";n.r(t);var a,c=n(2),r=n.n(c),s=n(22),l=n.n(s),i=n(9),o=n.n(i),d=n(6),u=n(12),j=n(1),m=n(7),b=n.n(m),p=n(0),h=function(e){var t=e.cityList.map((function(t){return Object(p.jsx)("button",{onClick:function(){return e.onSelection(t)},className:"btn btn-light my-1 mx-1",children:t},t)}));return Object(p.jsx)("div",{className:"my-3 d-flex flex-wrap justify-content-center align-items-stretch align-self-stretch",children:t})},x=n(3),f=function(){return Object(p.jsxs)("div",{className:"card-header row placeholder-glow d-flex justify-content-between g-0 p-4",children:[Object(p.jsx)("h4",{className:"card-title flex-grow-1  col-4",children:Object(p.jsx)("span",{className:"placeholder col-6"})}),Object(p.jsx)("h6",{className:"col-4",children:Object(p.jsx)("span",{className:"placeholder col-12"})})]})},v=function(){return Object(p.jsx)("div",{className:"col-4",children:Object(x.a)(Array(2).keys()).map((function(e){return Object(p.jsxs)("div",{children:[Object(p.jsx)("i",{className:"placeholder col-1"}),Object(p.jsx)("span",{className:"placeholder col-9"})]},e)}))})},O=function(){return Object(p.jsxs)("div",{className:"card-body row placeholder-glow g-0 p-4",children:[Object(p.jsxs)("div",{className:"text-center",children:[Object(p.jsx)("h6",{className:"display-4 font-weight-bold",children:Object(p.jsx)("span",{className:"placeholder col-6"})}),Object(p.jsx)("p",{className:"small px-5",children:Object(p.jsx)("span",{className:"placeholder col-6"})})]}),Object(p.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(p.jsx)(v,{}),Object(p.jsx)("div",{className:"display-4 col-4",children:Object(p.jsx)("span",{className:"placeholder col-12"})})]}),Object(p.jsx)(y,{})]})},g=function(){return Object(p.jsx)("div",{className:"df__item flex-column text-center",children:Object(p.jsx)("h1",{children:Object(p.jsx)("span",{className:"placeholder col-12 placeholder-lg"})})})},y=function(){return Object(p.jsx)("div",{className:"d-flex justify-content-space-evenly align-items-center",children:Object(x.a)(Array(7).keys()).map((function(e,t){return Object(p.jsx)(g,{forecast:e},t)}))})},w=function(){return Object(p.jsxs)("div",{className:"card","aria-hidden":"true",children:[Object(p.jsx)(f,{}),Object(p.jsx)(O,{})]})},N=function(e){var t=e.name,n=e.dateTime,a=new Date(1e3*n);return Object(p.jsx)("div",{className:"card-header row g-0 p-4",children:Object(p.jsxs)("div",{className:"hstack gap-3",children:[Object(p.jsx)("div",{className:"h3 card-title pe-5",children:t}),Object(p.jsx)("div",{className:"vr"}),Object(p.jsxs)("div",{className:"vstack px-5",children:[Object(p.jsx)("div",{className:"h6 text-muted small",children:a.toLocaleDateString()}),Object(p.jsxs)("div",{className:"h6 text-muted small",children:[" ",a.toLocaleTimeString()]})]})]})})},C=function(e){var t=e.value,n=e.icon;return Object(p.jsxs)("div",{children:[Object(p.jsx)("i",{className:n}),Object(p.jsx)("span",{children:t})]})},k=function(e){var t=e.current,n={sunrise:"bi bi-sunrise fa-solid fa-fw",sunset:"bi bi-sunset fa-solid fa-fw",humidity:"fas fa-tint fa-fw",wind_speed:"fas fa-wind fa-fw"},a=Object.keys(n);return Object(p.jsx)("div",{className:"flex-grow-1",children:a.map((function(e,a){return Object(p.jsx)(C,{value:t&&t[e],icon:n[e]},a)}))})},T=(n(47),function(e){var t=e.hour,n=new Intl.DateTimeFormat("en-US",{hour:"numeric",hour12:!0}).format(new Date(1e3*(null===t||void 0===t?void 0:t.dt))).replace(/\s+/g,""),a=null===t||void 0===t?void 0:t.weather[0].icon,c=null===t||void 0===t?void 0:t.weather[0].description,r=null===t||void 0===t?void 0:t.temp;return Object(p.jsxs)("div",{className:"d-flex flex-column hf__item justify-content-evenly small",children:[Object(p.jsx)("p",{className:"mb-0",children:n}),Object(p.jsx)("div",{children:Object(p.jsx)("img",{className:"img-fluid",src:"".concat("","/assets/icons/").concat(a,".png"),alt:c})}),Object(p.jsx)("p",{children:r})]})}),S=function(e){var t=e.hourly;return Object(p.jsx)("div",{className:"d-flex  hf__items text-center",children:t&&t.map((function(e,t){return Object(p.jsx)(T,{hour:e},t)}))})},_=n(11);_.a.register.apply(_.a,Object(x.a)(_.b));var E=function(e){var t=e.hourlyData,n=null===t||void 0===t?void 0:t.map((function(e){return e.temp})),r=null===t||void 0===t?void 0:t.map((function(e){return e.rain&&e.rain["1h"]})),s=Object(c.useRef)(null);return Object(c.useEffect)((function(){return function(){var e={type:"line",data:{datasets:[{type:"line",label:"temp",data:n,yAxisID:"TempAxis",fill:!1,borderColor:"rgb(0,158,115)",tension:.4},{type:"bar",label:"rain",data:r,yAxisID:"RainAxis",backgroundColor:"rgba(39,76,245,0.3)"}],labels:null===t||void 0===t?void 0:t.map((function(e){return new Intl.DateTimeFormat("en-US",{hour:"numeric",hour12:!0}).format(new Date(1e3*(null===e||void 0===e?void 0:e.dt))).replace(/\s+/g,"")}))},options:{responsive:!0,scales:{TempAxis:{id:"TempAxis",type:"linear",position:"left",grid:{display:!0,drawBorder:!1,drawOnChartArea:!1},title:{text:"\xb0"}},RainAxis:{id:"RainAxis",position:"right",grid:{display:!1,drawBorder:!1,drawOnChartArea:!1},ticks:{display:!1,min:0}}},plugins:{tooltip:{callbacks:{label:function(e){var t=e.dataset.label||"";return 1===e.datasetIndex&&null!==e.parsed.y?t+=" "+e.parsed.y+" mm":0===e.datasetIndex&&null!==e.parsed.y&&(t+=" "+e.parsed.y+"\xb0"),t}}}}}},c=s.current.getContext("2d");"undefined"!==typeof a&&a.destroy(),a=new _.a(c,e)}(),function(){return a.destroy()}}),[s,t]),Object(p.jsx)("div",{children:Object(p.jsx)("canvas",{ref:s})})},D=function(e){var t,n,a=e.current,c=e.hourly,r=null===a||void 0===a?void 0:a.temp,s=null===a||void 0===a?void 0:a.feels_like,l=null===a||void 0===a||null===(t=a.weather[0])||void 0===t?void 0:t.description,i=null===a||void 0===a||null===(n=a.weather[0])||void 0===n?void 0:n.icon;return Object(p.jsxs)("div",{className:"card-body row g-0 p-4",children:[Object(p.jsxs)("div",{className:"text-center d-flex flex-column mb-4",children:[Object(p.jsx)("h4",{className:"display-4 font-weight-bold",children:r}),Object(p.jsxs)("span",{className:"small px-5",children:[" Feels like: ",s]}),Object(p.jsx)("span",{className:"small px-5",children:l})]}),Object(p.jsxs)("div",{className:"d-flex align-items-center pb-3",children:[Object(p.jsx)(k,{current:a}),Object(p.jsx)("div",{children:Object(p.jsx)("img",{src:"".concat("","/assets/icons/").concat(i,".png"),alt:l})})]}),Object(p.jsx)(E,{hourlyData:null===c||void 0===c?void 0:c.slice(0,8)}),Object(p.jsx)(S,{hourly:c})]})},F=function(e){var t=e.day,n=new Intl.DateTimeFormat("en-US",{weekday:"long"}).format(new Date(1e3*t.dt)),a={min:t.temp.min,max:t.temp.max},c=t.weather[0].icon,r=null===t||void 0===t?void 0:t.weather[0].description;return Object(p.jsxs)("div",{className:"d-flex align-items-center list-group-item border-0 mb-0",children:[Object(p.jsx)("p",{className:"flex-grow-1 small mb-0",children:n}),Object(p.jsx)("p",{className:"small mb-0",children:Object(p.jsx)("img",{className:"img-fluid w-50",src:"".concat("","/assets/icons/").concat(c,".png"),alt:r})}),Object(p.jsx)("p",{className:"small col-2 mb-0",children:a.max}),Object(p.jsx)("p",{className:"small col-2 text-muted mb-0",children:a.min})]})},I=function(e){var t=e.daily;return Object(p.jsx)("div",{className:"list-group collapse",id:"collapseContent1",children:t&&t.map((function(e,t){return Object(p.jsx)(F,{day:e},t)}))})},A=(n(48),function(e){var t=e.daily;return Object(p.jsxs)("div",{className:"card-footer row g-0 p-4",children:[Object(p.jsx)(I,{daily:t}),Object(p.jsxs)("a",{className:"btn btn-link link-info p-md-1 my-1","data-mdb-toggle":"collapse",href:"#collapseContent1",role:"button","aria-expanded":"false","aria-controls":"collapseContent1",children:[Object(p.jsx)("i",{className:"fas fa-chevron-down fa-lg"}),Object(p.jsx)("i",{className:"fas fa-chevron-up fa-lg"})]})]})}),L=(n(49),function(e){var t,n,a=function(e,t){if(e.current){var n,a,c,r,s,l={temp:"metric"===t?"\xb0C":"\xb0F",feels_like:"metric"===t?"\xb0C":"\xb0F",pressure:"hPa",humidity:"%",dew_point:"metric"===t?"\xb0C":"\xb0F",clouds:"%",visibility:"m",wind_speed:"metric"===t?" m/s":" mph",wind_gust:"metric"===t?" m/s":" mph",wind_deg:"\xb0",rain:"mm",snow:"mm"},i=function(e,t){return e&&("metric"===t?(n=e,5*(n-32)/9):e).toFixed();var n},o=function(e,t){return e&&("metric"===t?(n=e,.44704*n):e).toFixed();var n},u=Object(j.a)(Object(j.a)({},null===e||void 0===e?void 0:e.current),{},{temp:i(null===e||void 0===e||null===(n=e.current)||void 0===n?void 0:n.temp,t),feels_like:i(null===e||void 0===e||null===(a=e.current)||void 0===a?void 0:a.feels_like,t),dew_point:i(null===e||void 0===e||null===(c=e.current)||void 0===c?void 0:c.dew_point,t),wind_speed:o(null===e||void 0===e||null===(r=e.current)||void 0===r?void 0:r.wind_speed,t),wind_gust:o(null===e||void 0===e||null===(s=e.current)||void 0===s?void 0:s.wind_gust,t)});return Object(j.a)(Object(j.a)({},e),{},{current:Object.keys(u).reduce((function(e,t){return e[t]=t in l?u[t]+l[t]:u[t],e}),{}),daily:e.daily.map((function(e){return Object(j.a)(Object(j.a)({},e),{},{temp:Object.fromEntries(Object.entries(e.temp).map((function(e){var n=Object(d.a)(e,2),a=n[0],c=n[1];return[a,i(c,t)]})))})})),hourly:e.hourly.map((function(e){return Object(j.a)(Object(j.a)({},e),{},{temp:i(e.temp,t)})}))})}}(e.data,e.units);return Object(p.jsxs)("div",{className:"card",style:{borderRadius:"1.25rem"},children:[Object(p.jsx)(N,{name:null===a||void 0===a||null===(t=a.current)||void 0===t?void 0:t.name,dateTime:null===a||void 0===a||null===(n=a.current)||void 0===n?void 0:n.dt}),Object(p.jsx)(D,{current:null===a||void 0===a?void 0:a.current,hourly:null===a||void 0===a?void 0:a.hourly}),Object(p.jsx)(A,{daily:null===a||void 0===a?void 0:a.daily})]})}),q=(n(50),function(e){var t=e.handleImperial,n=e.handleMetric;return Object(p.jsxs)("div",{className:"my-3 d-flex flex-wrap justify-content-center align-items-stretch align-self-stretch",children:[Object(p.jsx)("button",{onClick:t,className:"btn btn-sm btn-light",children:"\xb0F"}),Object(p.jsx)("button",{onClick:n,className:"btn btn-sm btn-dark",children:"\xb0C"})]})});n(51);function R(e){var t=e.changeCity,n=(e.changeLatLon,Object(c.useState)({suggestionIdx:0,suggestions:[],query:""})),a=Object(d.a)(n,2),r=a[0],s=a[1];Object(c.useEffect)((function(){var e=b.a.CancelToken.source(),t=e.cancel,n=e.token,a=setTimeout((function(){return l(r.query,n).then((function(e){s(Object(j.a)(Object(j.a)({},r),{},{suggestions:e}))}))}),500);return function(){return t("No longer latest query")||clearTimeout(a)}}),[r.query]);var l=function(){var e=Object(u.a)(o.a.mark((function e(t,n){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={data:[]},!t){e.next=12;break}return e.prev=2,e.next=5,b.a.get("/api/suggestions?name=".concat(t),n);case 5:a=e.sent,e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),console.error(e.t0),b.a.isCancel(e.t0);case 12:return e.abrupt("return",a.data);case 13:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t,n){return e.apply(this,arguments)}}(),i=function(e){s({suggestionIdx:0,suggestions:[],query:""}),t({name:e.currentTarget.dataset.city,lat:e.currentTarget.dataset.lat,lon:e.currentTarget.dataset.lon})},m=function(e){var t=e.onChange,n=e.onKeyDown,a=e.placeholder,c=e.query;return Object(p.jsx)("div",{className:"input-group mt-3 rounded",children:Object(p.jsx)("input",{autoFocus:!0,type:"search",value:c,autoComplete:"off",onChange:t,onKeyDown:n,id:"form1",className:"form-control",placeholder:a,"aria-label":"Search"})})},h=r.suggestions;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(m,{onChange:function(e){s(Object(j.a)(Object(j.a)({},r),{},{query:e.currentTarget.value}))},onKeyDown:function(e){13===e.keyCode?(r.suggestions[r.suggestionIdx],s(Object(j.a)(Object(j.a)({},r),{},{query:"",suggestionIdx:0,suggestions:[]}))):38===e.keyCode&&0!==r.suggestionIdx?s(Object(j.a)(Object(j.a)({},r),{},{suggestionIdx:r.suggestionIdx-1})):40===e.keyCode&&r.suggestionIdx<r.suggestions.length-1&&s(Object(j.a)(Object(j.a)({},r),{},{suggestionIdx:r.suggestionIdx+1}))},placeholder:"City",query:r.query}),h&&Object(p.jsx)("ul",{className:"dropdown-menu scrollable-menu position-static rounded show",children:h.map((function(e,t){return Object(p.jsxs)("li",{className:"d-flex justify-content-between dropdown-item","data-city":e.name,"data-lat":e.coord.lat,"data-lon":e.coord.lon,onClick:i,children:[Object(p.jsxs)("span",{children:[e.name+", ",e.state&&e.state+", ",e.country+" ",Object(p.jsx)("img",{src:"https://openweathermap.org/images/flags/".concat(e.country.toLowerCase(),".png"),alt:""})]}),Object(p.jsx)("span",{className:"text-muted small",children:e.coord.lat.toFixed(3)+", "+e.coord.lon.toFixed(3)})]},t)}))})]})}var U={lat:null,lon:null,name:"",timezone:"",timezone_offset:null,current:null,hourly:[],daily:[]};function H(e,t){switch(t.type){case"SEED":return Object(j.a)(Object(j.a)({},e),{},{weatherData:t.payload});case"FETCH_START":return Object(j.a)(Object(j.a)({},e),{},{isLoading:!0,isError:!1});case"FETCH_SUCCESS":return Object(j.a)(Object(j.a)({},e),{},{weatherData:t.payload,isLoading:!1,isError:!1});case"FETCH_FAILURE":return Object(j.a)(Object(j.a)({},e),{},{isLoading:!1,isError:!0});case"RESET":return{weatherData:U,isLoading:!1,isError:!1};default:throw new Error}}function B(){return(B=Object(u.a)(o.a.mark((function e(t,n,a){var c,r,s,l,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s={},!(t.name||(null===t||void 0===t||null===(c=t.coord)||void 0===c?void 0:c.lat)&&(null===t||void 0===t||null===(r=t.coord)||void 0===r?void 0:r.lon))){e.next=21;break}return n({type:"FETCH_START"}),e.prev=3,l={},t.name&&(l.name=t.name),t.coord.lat&&t.coord.lon&&(l.lat=t.coord.lat,l.lon=t.coord.lon),e.next=9,b.a.get("/api/weather",{params:l},a);case 9:s=e.sent,(i=s.data).current.name=t.name,i.current.sunset=new Date(1e3*i.current.sunset).toLocaleTimeString([],{timeStyle:"short"}),i.current.sunrise=new Date(1e3*i.current.sunrise).toLocaleTimeString([],{timeStyle:"short"}),n({type:"FETCH_SUCCESS",payload:i}),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(3),console.error(e.t0),b.a.isCancel(e.t0)||n({type:"FETCH_FAILURE"});case 21:case"end":return e.stop()}}),e,null,[[3,17]])})))).apply(this,arguments)}var K=function(){var e=Object(c.useState)(""),t=Object(d.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)({lat:null,lon:null}),s=Object(d.a)(r,2),l=s[0],i=s[1],o=Object(c.useState)("imperial"),u=Object(d.a)(o,2),j=u[0],m=u[1],x=Object(c.useReducer)(H,{weatherData:U,isLoading:!1,isError:!1}),f=Object(d.a)(x,2),v=f[0],O=v.weatherData,g=v.isError,y=v.isLoading,N=f[1];Object(c.useEffect)((function(){var e=b.a.CancelToken.source(),t=e.cancel,a=e.token,c=setTimeout((function(){!function(e,t,n){B.apply(this,arguments)}({name:n,coord:l},N,a)}),500);return function(){return t("No longer latest query")||clearTimeout(c)}}),[n,l]);return Object(p.jsx)("div",{className:"App",children:Object(p.jsx)("div",{className:"container py-5 h-100",children:Object(p.jsx)("div",{className:"row d-flex justify-content-center align-items-center h-100",children:Object(p.jsxs)("div",{className:"position-relative col-md-8 col-lg-6 col-xl-4",children:[Object(p.jsx)("h1",{className:"text-center",children:"Weather App"}),Object(p.jsx)(R,{changeCity:function(e){var t,n;a(e.name),i({lat:null!==(t=e.lat)&&void 0!==t?t:null,lon:null!==(n=e.lon)&&void 0!==n?n:null})}}),Object(p.jsx)(q,{handleImperial:function(){return m("imperial")},handleMetric:function(){return m("metric")}}),Object(p.jsx)(h,{cityList:["New York","Detroit","Chicago","Los Angeles","Seattle"],onSelection:function(e){a(e),i({lat:null,lon:null})}}),g&&Object(p.jsx)("div",{className:"alert alert-danger",children:n?"We do not have information for ".concat(n,", please enter another city"):"Something went wrong...please enter another city"}),y?Object(p.jsx)(w,{}):""===n||g?Object(p.jsx)("div",{}):Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(L,{data:O,units:j})})]})})})})};l.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(K,{})}),document.getElementById("root"))}},[[52,1,2]]]);
//# sourceMappingURL=main.a6557958.chunk.js.map